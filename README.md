# Лабораторная работа №3
## Средства обфускации

**Выполнили:** Ульмашев Ислам Русланович, Духнай Николай Евгеньевич  
**Группа:** 21-К-АС2  
**Дисциплина:** «Защита программного обеспечения защищенных автоматизированных систем»

---

### Цели работы

1. Изучить принципы работы обфускаторов
2. Реализовать программу, выполняющую системный вызов и вывод информации
3. Провести дизассемблирование исполняемых файлов до и после обфускации
4. Сравнить полученные результаты и сделать выводы об эффективности обфускации

---

### Ход работы

#### 1. Разработка тестовой программы

Была разработана программа на Python, удовлетворяющая требованиям задания:

**Программа выполняет:**
1. Системный вызов (запуск командной строки cmd.exe)
2. Вывод фамилий выполнивших работу и номера группы
3. Отображение списка файлов и каталогов из папки Documents текущего пользователя

Исходный код программы представлен в отдельном файле `lab3.py`.

#### 2. Применение обфускатора PyArmor

Для обфускации был выбран PyArmor.

**Этапы обфускации:**
1. Установка PyArmor: `pip install pyarmor==7.7.4`
2. Обфускация исходного кода: `pyarmor obfuscate lab3.py`
3. Сборка исполняемого файла: `pyinstaller --onefile dist/lab3.py`

**Результат:** В папке `dist` созданы:
- `lab3.py` - обфусцированная версия исходного кода
- `lab3.exe` - исполняемый файл для анализа

#### 3. Сравнительный анализ в IDA Pro

**3.1. Анализ исходного исполняемого файла:**
- Открыт файл `lab3.exe`
- IDA Pro показывает стандартную структуру загрузчика PyInstaller
- В секции `.rdata` присутствуют читаемые строки с фамилиями студентов
- Код загрузчика типичен для приложений, собранных PyInstaller

**3.2. Анализ обфусцированного исполняемого файла:**
- IDA Professional 9.2 не показывает никаких изменений.
- Вместо этого изменения видны в исходном коде, который явно закодирован и нечитабелен.

**3.3. Анализ исходных файлов Python:**
- Исходный файл `lab3.py`: содержит читаемый Python код с понятной структурой
- Обфусцированный файл `dist/lab3.py`: содержит зашифрованные байты и вызовы runtime PyArmor

**Ключевые различия:**
1. Размер обфусцированного файла больше из-за добавления защиты PyArmor
2. В обфусцированной версии отсутствуют читаемые строковые константы
3. Добавлены механизмы защиты от декомпиляции и отладки

#### 4. Анализ эффективности обфускации

**4.1. Защита исходного кода:**
- Исходный Python код преобразован в зашифрованный байт-код
- Прямая декомпиляция стандартными средствами невозможна
- Для запуска требуется наличие runtime библиотек PyArmor

**4.2. Защита строковых констант:**
- Все строки программы (фамилии, пути, сообщения) зашифрованы
- В дизассемблированном коде отсутствуют читаемые строки

**4.3. Устойчивость к анализу:**
- Усложнён статический анализ программы
- Затруднено понимание логики работы без декомпиляции
- Добавлена защита от отладки и модификации
---

**Итог:** В ходе лабораторной работы успешно применён обфускатор PyArmor для защиты Python-приложения, проведён сравнительный анализ дизассемблированного кода до и после обфускации, изучены принципы работы современных средств обфускации и их эффективность в защите программного обеспечения от анализа и модификации.
